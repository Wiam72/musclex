

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How it works &mdash; MuscleX  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="How to use" href="Projection-Traces--How-to-use.html" />
    <link rel="prev" title="Introduction" href="Projection-Traces-(pt).html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> MuscleX
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Muscle X</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Installation/index.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Application Suite</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Equator/index.html">Equator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../QuadrantFolding/index.html">Quadrant Folding</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Projection Traces</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Projection-Traces-(pt).html">Introduction</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">How it works</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#image-processing">Image processing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Projection-Traces--How-to-use.html">How to use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ScanningDiffraction/index.html">Scanning Diffraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ImageMerger/index.html">Image Merger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../DiffractionCentroids/index.html">Diffraction Centroids</a></li>
<li class="toctree-l2"><a class="reference internal" href="../DDFProcessor/index.html">DDF Processor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Calibration-Settings.html">Calibration Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Image-Processing-Functions.html">Image Processing Functions</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MuscleX</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Application Suite</a> &raquo;</li>
        
          <li><a href="index.html">Projection Traces</a> &raquo;</li>
        
      <li>How it works</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/AppSuite/ProjectionTraces/Projection-Traces--How-it-works.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-it-works">
<span id="how-it-works"></span><h1>How it works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h1>
<p>When an image is selected, if the image has ever been processed with the same version of the program, the cache will be downloaded, so the image won’t be processed again. Users need to specify boxes for the desired integration area and initial peak positions to trigger image processing. If the boxes and peaks are specified for one image in a folder, all other images in the same folder will be processed using these boxes and peak positions.</p>
<div class="section" id="image-processing">
<span id="image-processing"></span><h2>Image processing<a class="headerlink" href="#image-processing" title="Permalink to this headline">¶</a></h2>
<p>The program will process an image by going through a series of steps in the following order. (This assumes that the boxes and peaks have been specified already)</p>
<div class="section" id="obtain-the-1-d-projection-from-a-box">
<span id="obtain-the-1-d-projection-from-a-box"></span><h3>1. Obtain the 1-D Projection from a box<a class="headerlink" href="#obtain-the-1-d-projection-from-a-box" title="Permalink to this headline">¶</a></h3>
<p>In this process users just sum all pixel intensities vertically or horizontally depends on the shape of the box</p>
<p><img alt="-" src="../../_images/1dproj.png" /></p>
</div>
<div class="section" id="fit-model">
<span id="fit-model"></span><h3>2. Fit Model<a class="headerlink" href="#fit-model" title="Permalink to this headline">¶</a></h3>
<p>In this example, the intensity is integrated along a layer line and projected onto a line perpendicular to the meridian. The sharp peak in the center is a meridional reflection. To fit the model, you need to specify the approximate peak locations. This model will try to fit a Gaussian model to every peak and other 3 Gaussians at the center. These 3 Gaussians at the center are overall background, meridian background, and meridian peak. Therefore, the results will be as in the intensity trace shown below. The overall background is the blue area, the background under the meridian is the yellow area and the meridional peak is the red area. The green line is the resulting fit summing all peak Gaussians while the red lines are the positions of the layer line peak centers after fitting.</p>
<p><img alt="-" src="../../_images/model.png" /></p>
</div>
<div class="section" id="get-background-subtracted-projection">
<span id="get-background-subtracted-projection"></span><h3>3. Get Background Subtracted Projection<a class="headerlink" href="#get-background-subtracted-projection" title="Permalink to this headline">¶</a></h3>
<p>We try to remove all background and center peak, so in this process, the program will remove them by using 3 Gaussians from previous step.</p>
<p>Basically, the program will just subtract the 3 center Gaussians (colored) from the original projection (black line).</p>
<p><img alt="-" src="../../_images/subtract1.png" /></p>
<p>Then, the result is</p>
<p><img alt="-" src="../../_images/subtract2.png" /></p>
</div>
<div class="section" id="calculate-all-peak-information">
<span id="calculate-all-peak-information"></span><h3>4. Calculate all peak information<a class="headerlink" href="#calculate-all-peak-information" title="Permalink to this headline">¶</a></h3>
<p>The main objective of this process is to find centroids of all peaks. In order to calculate peaks’ centroids, the program needs to …</p>
<ol class="simple">
<li>Calculate baseline of each peak. By default, the baseline is the half-height of the peak, but you can change it manually later.</li>
<li>Find the left and right intersection locations around the peak (black) and its baseline (yellow) as below
<br/><img alt="-" src="../../_images/baseline.png" /><br/></li>
<li>Calculate the centroid by calculate the dot product of x (distance from center) and y (projected intensity) in range of the left and right intersections. Then, divide the result by the sum of y (projected intensity) along the range.</li>
</ol>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Projection-Traces--How-to-use.html" class="btn btn-neutral float-right" title="How to use" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Projection-Traces-(pt).html" class="btn btn-neutral" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, BioCAT.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>